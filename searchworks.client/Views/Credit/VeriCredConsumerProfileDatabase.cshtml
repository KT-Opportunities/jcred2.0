@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@model IEnumerable<searchworks.client.Credit.PersonInformation>

@{
    ViewBag.Title = "VeriCred Consumer Profile";
}

<div class="col-md-10 col-sm-10">
    <div class="col-6">
        <button onclick="Export()" class="button btn-b2">Export List</button>
    </div>
    <div class="con2">
        <div class="left_col">
            <div class="results">
                <i class='far fa-check-circle'
                   style='font-size:30px;color:white; margin-left:10px; padding-top: 15px; display: inline-block '></i>
                <p>2 Results</p>
            </div>
            <p class="num">@ViewData["ResponseMessage"]</p>
            <p class="num2">VeriCred Consumer Profile</p>

            <div class="multi non">
                Multiple Results
            </div>
            <div class="multi act">
                Detailed Information
            </div>

            <div class="seaInfo">
                Search Information
            </div>

            <div class="userInfo">
                <p class="">User:<span>@ViewData["user"]</span></p>
                <p class="">Date:<span>@ViewData["date"] </span></p>
                <p class="">Reference:<span>@ViewData["ref"]</span></p>
                <p class="">Request:<br /><span>@ViewData["ResponseMessage"]</span></p>
            </div>
        </div>

        <div class="right_col">
            <div id="notification" class="seaRes">
                NCR NOTIFICATION <span id="plusNot" class="coll"><i class="fas fa-plus"></i></span><span id="minusNot" class="coll"><i class="fas fa-minus"></i></span>
            </div>
            <div class="not">
                Please note that the search results will automatically be deleted with in 48hours as per NCR
                regulations.
                We recommend downloading/exporting a PDF or EXCEL copy of this search and storing it locally.<br>
            </div>

            <div id="notification" class="seaRes">
                VeriCred <span id="plusPerInfo" class="coll"><i class="fas fa-plus"></i></span><span id="minusPerInfo" class="coll"><i class="fas fa-minus"></i></span>
            </div>

            <div class="PerInfo">
                <table class="table table-striped">
                    <thead>
                        <tr>
                            <th id="PIU" style="border: none; cursor:pointer;" colspan="2">Person Information</th>
                        </tr>
                    </thead>
                    <tbody id="PITU" style="display:none;">
                        @foreach (var item in @ViewBag.PersonInfoList)
                        {
                            <tr>
                                <td colspan="2">Date of Birth</td>
                                <td style="border: none;" colspan="4">@item.DateOfBirth</td>

                                <td><a class="seaMore" href="#">View more</a></td>
                            </tr>
                            <tr>
                                <td colspan="2">Full Name</td>
                                <td style="border: none;" colspan="4">@item.Fullname</td>

                                <td><a class="seaMore" href="#">View more</a></td>
                            </tr>

                            <tr>
                                <td colspan="2">ID Number</td>
                                <td style="border: none;" colspan="4">@item.IDNumber</td>

                                <td><a class="seaMore" href="#">View more</a></td>
                            </tr>
                            <tr>
                                <td colspan="2">Gender</td>
                                <td style="border: none;" colspan="4">@item.Gender</td>

                                <td><a class="seaMore" href="#">View more</a></td>
                            </tr>
                            <tr>
                                <td colspan="2">Age</td>
                                <td style="border: none;" colspan="4">@item.Age</td>

                                <td><a class="seaMore" href="#">View more</a></td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>

            <div class="PerInfo">
                <table class="table table-striped">
                    <thead>
                        <tr>
                            <th id="CIU" style="border: none; cursor:pointer;" colspan="2">Credit Information</th>
                        </tr>
                    </thead>
                    <tbody id="CITU">
                        @foreach (var item in @ViewBag.creditInformationList)
                        {
                            <tr>
                                <td colspan="2">DelphiScore</td>
                                <td style="border: none;" colspan="4">@item.DelphiScore</td>
                                <td><a class="seaMore" href="#">View more</a></td>
                            </tr>
                            <tr>
                                <td colspan="2">Risk Colour</td>
                                <td style="border: none;" colspan="4">@item.RiskColour</td>
                                <td><a class="seaMore" href="#">View more</a></td>
                            </tr>
                            <tr>
                                <td colspan="2">Delphi Score Chart URL</td>
                                <td style="border: none;" colspan="4">
                                    <a href=@item.DelphiScoreChartURL>@item.DelphiScoreChartURL</a>
                                </td>
                                <td><a class="seaMore" href="#">View more</a></td>
                            </tr>
                        }
                        @foreach (var item in @ViewBag.ccastatsList)
                        {
                            <tr>
                                <td colspan="2">Monthly Instalment</td>
                                <td style="border: none;" colspan="4">@item.MonthlyInstalment</td>
                                <td><a class="seaMore" href="#">View more</a></td>
                            </tr>
                        }
                    </tbody>
                    <thead>
                        <tr>
                            <th id="CPPA" style="border: none; cursor:pointer;" colspan="2">CPA Accounts</th>
                        </tr>
                    </thead>
                    @foreach (var item in @ViewBag.cppaAccountsList)
                    {

                        <tbody id="CPPAT">
                            <tr>
                                <td colspan="2">Account_ID</td>
                                <td id="" style="border: none; cursor:pointer;" colspan="2">@item.Account_ID</td>
                            </tr>
                            <tr>
                                <td colspan="2">Subscriber Code</td>
                                <td style="border: none;" colspan="4">@item.SubscriberCode</td>
                                <td><a class="seaMore" href="#">View more</a></td>
                            </tr>
                            <tr>
                                <td colspan="2">Subscriber Name</td>
                                <td style="border: none;" colspan="4">@item.SubscriberName</td>
                                <td><a class="seaMore" href="#">View more</a></td>
                            </tr>
                            <tr>
                                <td colspan="2">AccountNO</td>
                                <td style="border: none;" colspan="4">@item.AccountNO</td>
                                <td><a class="seaMore" href="#">View more</a></td>
                            </tr>
                            <tr>
                                <td colspan="2">Open Date</td>
                                <td style="border: none;" colspan="4">@item.OpenDate</td>
                                <td><a class="seaMore" href="#">View more</a></td>
                            </tr>
                            <tr>
                                <td colspan="2">Last Payment Date</td>
                                <td style="border: none;" colspan="4">@item.LastPaymentDate</td>
                                <td><a class="seaMore" href="#">View more</a></td>
                            </tr>
                            <tr>
                                <td colspan="2">OpenBalance</td>
                                <td style="border: none;" colspan="4">@item.OpenBalance</td>
                                <td><a class="seaMore" href="#">View more</a></td>
                            </tr>
                            <tr>
                                <td colspan="2">OverdueAmount</td>
                                <td style="border: none;" colspan="4">@item.CurrentBalance</td>
                                <td><a class="seaMore" href="#">View more</a></td>
                            <tr>
                                <td colspan="2">OverdueAmount</td>
                                <td style="border: none;" colspan="4">@item.OverdueAmount</td>
                                <td><a class="seaMore" href="#">View more</a></td>
                            </tr>
                            <tr>
                                <td colspan="2">InstalmentAmount</td>
                                <td style="border: none;" colspan="4">@item.InstalmentAmount</td>
                                <td><a class="seaMore" href="#">View more</a></td>
                            </tr>
                            <tr>
                                <td colspan="2">StatusCodeDesc</td>
                                <td style="border: none;" colspan="4">@item.StatusCodeDesc</td>
                                <td><a class="seaMore" href="#">View more</a></td>
                            </tr>
                            <tr>
                                <td colspan="2">StatusDate</td>
                                <td style="border: none;" colspan="4">@item.StatusDate</td>
                                <td><a class="seaMore" href="#">View more</a></td>
                            </tr>
                            <tr>
                                <td colspan="2">IndustryType</td>
                                <td style="border: none;" colspan="4">@item.IndustryType</td>
                                <td><a class="seaMore" href="#">View more</a></td>
                            </tr>
                            <tr>
                                <td colspan="2">Payment History ChartURL</td>
                                <td style="border: none;" colspan="4">
                                    <a href="@item.PaymentHistoryChartURL">@item.PaymentHistoryChartURL</a>
                                </td>
                                <td><a class="seaMore" href="#">View more</a></td>
                            </tr>
                            <tr>
                                <td colspan="2">Payment History Account Details</td>
                                <td style="border: none;" colspan="4">
                                </td>
                                <td>
                                    <a class="seaMore" href="#" data-toggle="modal"
                                       data-target="#paymentHistoryAccountModal">View more</a>
                                </td>
                            </tr>
                        </tbody>
                        @*<tbody>
                                <tr>
                                    <td>
                                        <div class="modal fade" id="paymentHistoryAccountModal" tabindex="-1" role="dialog"
                                             aria-labelledby="exampleModalLabel" aria-hidden="true">
                                            <div class="modal-dialog" role="document">
                                                <div class="modal-content">
                                                    <div class="modal-header">
                                                        <h5 class="modal-title" id="exampleModalLabel">
                                                            Payment History
                                                            Account Details
                                                        </h5>-->
                                                        <button type="button" class="close" data-dismiss="modal"
                                                                aria-label="Close">
                                                            <span aria-hidden="true"></span>
                                                        </button>
                                                    </div>
                                                    <div class="modal-body">
                                                        <table class="table table-striped">
                                                            <thead>
                                                                <tr>
                                                                    <th>Last Payment Date</th>
                                                                    <th>Payment History</th>
                                                                    <th>Is Estimated</th>
                                                                </tr>
                                                            </thead>
                                                            <tbody id="CPPAT">
                                                                @foreach (var account in @item.paymentHistoryAccountList)
                                                                {
                                                                    <tr>
                                                                        <td style="border: none;">
                                                                            @account.LastPaymentDate
                                                                        </td>
                                                                        <td style="border: none;">
                                                                            @account.PaymentHistory
                                                                        </td>
                                                                        <td style="border: none;">
                                                                            @account.IsEstimated
                                                                        </td>
                                                                    </tr>

                                                                }
                                                            </tbody>
                                                            <tbody id="CPPAT">
                                                                <tr>
                                                                    <td style="border: none;">
                                                                    </td>
                                                                    <td style="border: none;">
                                                                    </td>
                                                                    <td style="border: none;">
                                                                    </td>
                                                                </tr>
                                                            </tbody>
                                                        </table>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>*@
                    }
                </table>
            </div>
        </div>
    </div>
</div>

<script>
    function Export() {
        var pdf = new jsPDF('p', 'pt', 'letter');
        // source can be HTML-formatted string, or a reference
        // to an actual DOM element from which the text will be scraped.
        var source = $('#content')[0];
        // we support special element handlers. Register them with jQuery-style
        // ID selector for either ID or node name. ("#iAmID", "div", "span" etc.)
        // There is no support for any other type of selectors
        // (class, of compound) at this time.
        specialElementHandlers = {
            // element with id of "bypass" - jQuery style selector
            '#bypassme': function (element, renderer) {
                // true = "handled elsewhere, bypass text extraction"
                return true
            }
        };
        margins = {
            top: 80,
            bottom: 60,
            left: 40,
            width: 522
        };
        pdf.setFillColor(204, 204, 204, 0);
        pdf.rect(10, 10, 150, 160, "F");
        // all coords and widths are in jsPDF instance's declared units
        // 'inches' in this case
        pdf.fromHTML(
            source, // HTML string or DOM elem ref.
            margins.left, // x coord
            margins.top, { // y coord
            'width': margins.width, // max width of content on PDF
            'elementHandlers': specialElementHandlers
        },

            function (dispose) {
                // dispose: object with X, Y of the last line add to the PDF
                //          this allow the insertion of new lines after html
                pdf.save('Test.pdf');
            }, margins
        );
    }
</script>
<script>
    //CompScan
    $("#PI").click(function () {
        $("#PIT").toggle();
    });
    $("#HAI").click(function () {
        $("#HAIT").toggle();
    });
    $("#CI").click(function () {
        $("#CIT").toggle();
    });

    $("#HI").click(function () {
        $("#HIT").toggle();
    });

    $("#add").click(function () {
        $("#addT").toggle();
    });

    $("#tel").click(function () {
        $("#telT").toggle();
    });

    $("#em").click(function () {
        $("#emT").toggle();
    });

    //TransUnion
    $("#PIU").click(function () {
        $("#PITU").toggle();
    });
    $("#HAIU").click(function () {
        $("#HAITU").toggle();
    });
    $("#CIU").click(function () {
        $("#CITU").toggle();
    });

    $("#HIU").click(function () {
        $("#HITU").toggle();
    });

    $("#addU").click(function () {
        $("#addTU").toggle();
    });

    $("#telU").click(function () {
        $("#telTU").toggle();
    });

    $("#emU").click(function () {
        $("#emTU").toggle();
    });

    //XDS
    $("#PIX").click(function () {
        $("#PITX").toggle();
    });
    $("#HAIX").click(function () {
        $("#HAITX").toggle();
    });
    $("#CIX").click(function () {
        $("#CITX").toggle();
    });

    $("#HIX").click(function () {
        $("#HITX").toggle();
    });

    $("#addX").click(function () {
        $("#addTX").toggle();
    });

    $("#telX").click(function () {
        $("#telTX").toggle();
    });

    $("#emX").click(function () {
        $("#emTX").toggle();
    });

    //VeriCred
    $("#PIV").click(function () {
        $("#PITV").toggle();
    });
    $("#HAIV").click(function () {
        $("#HAITV").toggle();
    });
    $("#CIV").click(function () {
        $("#CITV").toggle();
    });

    $("#HIV").click(function () {
        $("#HITV").toggle();
    });

    $("#addV").click(function () {
        $("#addTV").toggle();
    });

    $("#telV").click(function () {
        $("#telTV").toggle();
    });

    $("#emV").click(function () {
        $("#emTV").toggle();
    });

    $(document).ready(function () {
        $(".not").hide();
        $("#minusNot").hide();

        $('#plusNot').on('click', function () {
            $(".not").show();
            $("#minusNot").show();
            $("#plusNot").hide();

        });

        $('#minusNot').on('click', function () {
            $("#minusNot").hide();
            $("#plusNot").show();
            $(".not").hide();

        });

        $("#minusSeaInfo").hide();
        $(".SeaInfo").hide();

        $('#plusSeaInfo').on('click', function () {
            $(".SeaInfo").show();
            $("#minusSeaInfo").show();
            $("#plusSeaInfo").hide();

        });

        $('#minusSeaInfo').on('click', function () {
            $("#minusSeaInfo").hide();
            $("#plusSeaInfo").show();
            $(".SeaInfo").hide();
        });

        $("#minusPerInfo").hide();
        $(".PerInfo").hide();

        $('#plusPerInfo').on('click', function () {
            $(".PerInfo").show();
            $("#minusPerInfo").show();
            $("#plusPerInfo").hide();

        });

        $('#minusPerInfo').on('click', function () {
            $("#minusPerInfo").hide();
            $("#plusPerInfo").show();
            $(".PerInfo").hide();
        });

        $("#minusHomeInfo").hide();
        $(".HomeInfo").hide();

        $('#plusHomeInfo').on('click', function () {
            $(".HomeInfo").show();
            $("#minusHomeInfo").show();
            $("#plusHomeInfo").hide();

        });

        $('#minusHomeInfo').on('click', function () {
            $("#minusHomeInfo").hide();
            $("#plusHomeInfo").show();
            $(".HomeInfo").hide();
        });

        $("#minusTeleHis").hide();
        $(".TeleHis").hide();

        $('#plusTeleHis').on('click', function () {
            $(".TeleHis").show();
            $("#minusTeleHis").show();
            $("#plusTeleHis").hide();

        });

        $('#minusTeleHis').on('click', function () {
            $("#minusTeleHis").hide();
            $("#plusTeleHis").show();
            $(".TeleHis").hide();
        });

        $("#minusEmpHis").hide();
        $(".EmpHis").hide();

        $('#plusEmpHis').on('click', function () {
            $(".EmpHis").show();
            $("#minusEmpHis").show();
            $("#plusEmpHis").hide();

        });

        $('#minusEmpHis').on('click', function () {
            $("#minusEmpHis").hide();
            $("#plusEmpHis").show();
            $(".EmpHis").hide();
        });

        $("#minusEmpHis").hide();
        $(".EmpHis").hide();

        $('#plusEmpHis').on('click', function () {
            $(".EmpHis").show();
            $("#minusEmpHis").show();
            $("#plusEmpHis").hide();

        });

        $('#minusEmpHis').on('click', function () {
            $("#minusEmpHis").hide();
            $("#plusEmpHis").show();
            $(".EmpHis").hide();
        });

    });
</script>